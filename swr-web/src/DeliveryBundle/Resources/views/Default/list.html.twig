{% extends "default/Back/squelette.html.twig" %}


{% block content %}
    <div class="container">


                {% set flashbag_notices = app.session.flashbag.get('notice' ) %}
                {% if flashbag_notices is not empty %}
                     <div class="alert alert-success" role="alert">

                    <ul class="msg">
                        {% for notice in flashbag_notices %}
                            <li> {{ notice }} </li>

                        {% endfor %}

                    </ul>
                     </div>
                {% endif %}


        <div class="row"><a href="{{ path('Delivery_create') }}">

                <button class="btn btn-primary">Add a new delivery</button>
            </a></div>
        <br>

        <div class="row">
            <table class="table-bordered" border="1">
                <tr>
                    <th>Number Delivery</th>
                    <th>Name Deliveryman</th>
                    <th>Date delivery</th>
                    <th>Item</th>
                    <th>Address</th>


                </tr>


                {% for elt in Delivery %}

                    <td>{{ elt.IdDe }}</td>
                    <td>{{ elt.idDman.Fname }}</td>
                    <td>{{ elt.DateD }}</td>
                    <td>{{ elt.item }}</td>
                    <td>{{ elt.idh.address }}</td>


                    <!-- data-toggle="modal" data-target="#myModal" iddman="interaction" -->
                    <td>
                        <button data-toggle="modal" data-target="#myModal" id="interaction" type="button"
                                class="btn btn-danger">
                            <i class="far fa-trash-alt"></i></button>
                    </td>
                    <!-- this delete works
                    <td><a id="primaryButton" href="{{ path('Delivery_delete', {'IdDe': elt.IdDe}) }}">Supprimer</a></td>
                    -->
                    <td><a href="{{ path('Delivery_update',{'IdDe':elt.IdDe}) }}">
                            <button class="btn btn-secondary">modifier</button>
                        </a></td>
                    <!-- Modal -->
                    <div class="modal fade" id="myModal" role="dialog">
                        <div class="modal-dialog">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">

                                    <h4 class="modal-title">Attention</h4>
                                </div>
                                <div class="modal-body">
                                    <p>Are you sure you want to delete this delivery ?</p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
                                    <button type="button" class="btn btn-danger"><a style="color: white"
                        href="{{ path('Delivery_delete', {'IdDe': elt.IdDe}) }}">Yes</a>
                                    </button>
                                </div>
                            </div>

                        </div>
                    </div>
                    </tr>

                {% endfor %}

            </table>
            {# display navigation #}
            <div class="navigation">
                {{ knp_pagination_render(Delivery) }}
            </div>


        </div>
    </div>
    <br>
    <div class="row"><a href="{{ path('Delivery_stats') }}">

            <button style="margin-left: 25px;" type="button" class="btn btn-primary">Click here to see some statistics </button>
        </a></div>

    </br>


        {% endblock %}
