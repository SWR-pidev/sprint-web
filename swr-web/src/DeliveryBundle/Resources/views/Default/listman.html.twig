{% extends "default/Back/squelette.html.twig" %}

{% block content %}

<script src="https://kit.fontawesome.com/4f58c8d15a.js" crossorigin="anonymous"></script>

<div class="container">
    <div class="container">

        <div class="row"><a href="{{ path('Deliveryman_create') }}">

                <button style="margin-left: 1px;"  class="btn btn-primary">Add a new delivery man</button>
            </a></div>
    </div> <br>

        {% set flashbag_notices = app.session.flashbag.get('notice' ) %}
        {% if flashbag_notices is not empty %}
            <div class="alert alert-success" role="alert">

                <ul class="msg">
                    {% for notice in flashbag_notices %}
                         {{ notice }}

                    {% endfor %}

                </ul>
            </div>
        {% endif %}
            {% set flashbag_notices = app.session.flashbag.get('warning' )%}
            {% if flashbag_notices is not empty %}
                <div class="alert alert-danger" role="alert">
                    <ul class="msg">
                        {% for notice in flashbag_notices %}
                            <i class="fas fa-skull-crossbones"></i>    {{ notice}}
                        {%endfor %}
                    </ul>
                </div>
            {% endif%}

    <div class="row">
        <table class="table-bordered" border="1">
            <tr>
                <th>Id delivery man</th>
                <th>First name</th>
                <th>Last name</th>
                <th>Phone number</th>
                <th>Mail</th>
                <th>Number Delivery</th>




            </tr>


            {% for elt in Deliveryman     %}

                <td>{{ elt.iddman }}</td>
                <td>{{ elt.fname}}</td>
                <td>{{ elt.lname }}</td>
                <td>{{ elt.pnum}}</td>
                <td>{{ elt.mail}}</td>
                <td>{{ elt.numd}}</td>

                <!-- data-toggle="modal" data-target="#myModal" iddman="interaction" -->
                <td><button data-toggle="modal" data-target="#myModal" id="interaction" type="button" class="btn btn-danger">
                    <i class="far fa-trash-alt"></i></button></td>
                <!-- this delete works
                    <td><a id="primaryButton" href="{{ path('Deliveryman_delete', {'iddman': elt.iddman}) }}">Supprimer</a></td>
                    -->
                <td><a href="{{ path('Deliveryman_update',{'iddman':elt.iddman})}}">
                        <button class="btn btn-secondary">modifier</button></a></td>
            <!-- Modal -->
            <div class="modal fade" id="myModal" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">

                            <h4 class="modal-title">Attention</h4>
                        </div>
                        <div class="modal-body">
                            <p>Are you sure you want to delete this deliveryman ?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-danger"> <a style="color: white"
                           href="{{ path('Deliveryman_delete', {'iddman': elt.iddman}) }}">Yes</a></button>
                        </div>
                    </div>

                </div>
            </div>

                </tr>
            {% endfor %}


        </table>
        {# display navigation #}
        <div class="navigation">
            {{ knp_pagination_render(Deliveryman) }}
        </div>


    </div>
</div>



    <div class="row"><a href="{{ path('Deliveryman_stats') }}">
            <br>
            <button style="margin-left: 30px;" type="button" class="btn btn-primary">Click here to see some statistics </button>
        </a></div>
    </br>
        {% endblock %}

